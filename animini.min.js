(function(){function f(a,b){for(var c=0,d=("animini."+a).split("."),o=d.length,k=window;c<o;++c)k=void 0==k[d[c]]?k[d[c]]=c==o-1?b:{}:k[d[c]]}function y(a){return a.toLowerCase().replace(/-([a-z])/,function(a,c){return c.toUpperCase()})}function z(a){return function(b){return 1-a(1-b)}}function A(a){return function(b){return 0.5>b?a(2*b)/2:1-a(2-2*b)/2}}function g(){}function h(a,b){this.animations=[];if(a)this.millisec=a;this.onend=b}function i(a){this.animations=[];this.onend=a;this.current=-1}
function s(a,b){this.millisec=a;this.onend=b}function t(a,b,c,d,o){this.obj=a;this.props=b;if(c)this.millisec=c;this.onend=o;if(d)this.easingFunc=d}function B(a){return""+a}function C(a){a="0"+Math.round(a).toString(16);return a.substr(a.length-2)}function v(a){for(var b={},a=(a||"").replace(/^\s+|\s*;\s*$/g,"").split(/\s*;\s*/g),c=a.length-1;0<=c;--c){var d=a[c].split(/\s*:\s*/,2);2==d.length&&d[1]&&(b[y(d[0])]=d[1])}return b}var w=4/3,x=1/3,D=2*x*Math.PI*Math.asin(1/w),n={linear:function(a){return a},
quad:function(a){return Math.pow(a,2)},cubic:function(a){return Math.pow(a,3)},quart:function(a){return Math.pow(a,4)},sine:function(a){return 1-Math.cos(a*Math.PI/2)},expo:function(a){return a?Math.pow(2,10*(a-1)):0},circ:function(a){return 1-Math.sqrt(1-Math.pow(a,2))},elastic:function(a){return 0==a||1==a?a:-(w*Math.pow(2,10*(a-1))*Math.sin(2*(a-D)*Math.PI/x))},expect:function(a){return Math.pow(a,2)*(4*a-3)},bounce:function(a){var b=1-a,a=function(a,d){return 1-7.5625*Math.pow(b-a/11,2)-d};return b<
4/11?a(0,0):b<8/11?a(6,0.75):b<10/11?a(9,0.9375):a(10.5,0.984375)}};(function(){for(var a in n){var b=n[a];n[a]={"in":b,out:z(b),inout:A(b)}}})();f("easing",n);f("Animation",g);g.prototype={millisec:1E3,easingFunc:n.sine.inout,start:function(){this.frame=0;this.pos=1/this.millisec;this.startTime=(new Date).getTime();this.endTime=this.startTime+this.millisec;this.setTimer(this.step,1);this.doStep()},stop:function(){void 0!=this.timeout&&clearTimeout(this.timeout);delete this.timeout;this.pos=1;this.doStep()},
step:function(){var a=(new Date).getTime(),b=this.endTime-a;if(0<b){if(this.fpms=++this.frame/(a-this.startTime),this.pos+=(1-this.pos)/this.fpms/b,1<=this.pos)this.pos=1}else this.pos=1;this.doStep();if(1>this.pos)this.setTimer(this.step,10);else if(delete this.timeout,this.onend)this.onend()},doStep:function(){},setTimer:function(a,b){this.timeout=window.setTimeout(this.cb(a),b)},cb:function(a){var b=this;return function(){return a.apply(b,arguments)}}};f("Parallel",h);h.prototype=new g;h.prototype.add=
function(a){this.animations.push(a)};h.prototype.start=function(){for(var a=0,b=this.animations.length;a<b;++a){var c=this.animations[a];c.setTimer=function(){};c.millisec=this.millisec;c.start()}g.prototype.start.call(this)};h.prototype.stop=function(){for(var a=0,b=this.animations.length;a<b;++a)this.animations[a].stop()};h.prototype.doStep=function(){for(var a=0,b=this.animations.length;a<b;++a)this.animations[a].step()};f("Serial",i);i.prototype=new g;i.prototype.add=function(a){this.animations.push(a)};
i.prototype.start=function(){for(var a=0,b=this.animations.length;a<b;++a)this.animations[a].onend=this.cb(this.next);this.current=-1;this.next()};i.prototype.stop=function(){-1!=this.current&&this.animations[this.current].stop();this.current=-1};i.prototype.doStep=function(){-1!=this.current&&this.animations[this.current].doStep()};i.prototype.next=function(){if(++this.current<this.animations.length)this.animations[this.current].start();else if(this.current=-1,this.onend)this.onend()};f("Pause",
s);s.prototype=new g;t.prototype=new g;t.prototype.doStep=function(){for(var a=(this.easingFunc.inout||this.easingFunc)(this.pos),b=this.props,c=b.length-1;0<=c;--c){for(var d=0,o=[],k=b[c].vals,g=k.length;d<g;++d){var j=k[d];o.push(j.prefix+j.to(a*j.delta+j.start)+j.postfix)}this.obj.style[b[c].prop]=o.join("")}};f("create",function(a,b,c,d,g,k){var b=v(b),c=v(c),i=[],j;for(j in b){var f=c[j];if(f){var h=b[j].split(/\s+/g),n=h.length,f=f.split(/\s+/g);if(f.length==n){for(var p=0,u=0,l=[];p<n;++p){var m=
h[p],r=f[p];if(m!=r){if(/^#/.test(m)&&(m=m.toLowerCase().replace(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/,"#$1$1$2$2$3$3"),r=r.toLowerCase().replace(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/,"#$1$1$2$2$3$3"),m==r))continue;var e={prefix:h.slice(u,1<p?p-1:0).join(" "),postfix:""},u=p+1;if(/^#/.test(m)){e.prefix+="#";var q=function(a){var b=m.substr(a,2),a=r.substr(a,2);b!=a?(e.start=parseInt(b,16),e.delta=parseInt(a,16)-e.start,e.to=C,l.push(e),e={prefix:"",postfix:""}):e.prefix+=b};q(1);q(3);q(5);if(e.prefix)l[l.length-
1].postfix=e.prefix}else{var q=parseFloat(m),s=parseFloat(r);if(q!=s)e.start=q,e.delta=s-q,e.to=B,e.postfix=m.replace(/^-?(?:\d+(?:\.\d*)?|\.\d+)/,""),l.push(e)}}}l[l.length-1].postfix+=" "+h.slice(u).join(" ");i.push({prop:j,vals:l})}}}return new t(a,i,d,g,k)})})();
